<div class="card mt-2 mb-5 mx-auto text-center" style="max-width: 98vw;">
    <div class="row align-items-center mx-1">
        <!-- columna #1 datos de proyecto -->
        <%- include('../partials/dataProjectCard_col1_projData'); %>
        
        <% if (proyecto[0].project[0].statusProject) { %>
            <div class="col-11 mx-auto">
        <% } else {  %>
            <div class="col-11 mx-auto pe-none" contenteditable="false" style="background-color: #00000040; opacity: 0.5">
        <% } %>
            <div class="card-body px-1">
                <% let j=0;
                    if (proyecto.length> 0) { 
                        for ( let m=0; proyecto.length> m; m++) { %>
                            
                            <div class="accordion" id="accordionPanelsStayOpenExample">
                                <% for ( let k=0; proyecto[m].project[j].oci.length> k; k++) { 
                                    if (proyecto[m].project[j].oci[k].visible) { %>
                                        <div class="accordion-item">
                                            <h2 class="accordion-header" id="panelsStayOpen-headingOneCard">
                                                <!-- boton accordion OCI's -->
                                                <%- include('../partials/dataProjectCard_btnAccord', { k, m, j }); %>
                                            </h2>

                                            <div id="panelsStayOpen-collapseOneCard<%=k %>" class="accordion-collapse show"
                                                aria-labelledby="panelsStayOpen-headingOne">

                                                <% if (proyecto[m].project[j].oci[k].ociStatus) { %>
                                                    <div class="accordion-body px-1 mw-100">
                                                <% } else { %>
                                                    <div class="accordion-body px-1 mw-100 pe-none" contenteditable="false" style="background-color: rgba(0, 0, 0, 0.25); opacity: 0.5">
                                                <% } %>

                                                    <div class="container-fluid">
                                                        <% if (proyecto[m].project[j].oci[k].otProject.length> 0) { %>
                                                            <!-- cabecera botonera principal de OCI -->
                                                            <%- include('../partials/dataProjectCard_btnOci', { k, m, j }); %>                    
                                                            
                                                            <div class="d-flex flex-row my-3">
                                                                <!-- tabla general -->
                                                                <%- include('../partials/dataProjectCard_tablaGral', { k, m, j }); %>
                                                                                                                                
                                                                <!-- tabla seguimiento -->
                                                                <%- include('../partials/dataProjectCard_tablaSeguim', { k, m, j }); %>

                                                                <!-- Carousel de Tablas -->
                                                                <div id="carouselExampleControls<%=k%>"
                                                                    class="carousel slide" data-bs-ride="carousel">

                                                                    <!-- mostrar botones de acuerdo a cantidad de slides -->
                                                                    <%- include('../partials/dataProjectCard_btnSlides', { k, m, j }); %>
                                                                                                                                        
                                                                    <% if (proyecto[0].project[0].levelProject == 'paraCotizar') { %>
                                                                        <div class="carousel-inner">
                                                                            <div class="carousel-item active" data-bs-interval="600000">

                                                                                <!-- --------- tabla S0 ----------- -->
                                                                                <%- include('../partials/dataProjectCard_tablaS0', { k, m, j }); %>
                                                                            </div>
                                                                            <div class="carousel-item" data-bs-interval="600000">

                                                                               <!-- --------- tablaProceso3D ----------- -->
                                                                               <%- include('../partials/dataProjectCard_tablaProceso3d', { k, m, j }); %>
                                                                            </div>
                                                                        </div>

                                                                    <% } else if (proyecto[0].project[0].levelProject == 'aRiesgo') { %>                                                                
                                                                        <div class="carousel-inner">
                                                                            <div class="carousel-item active" data-bs-interval="600000">

                                                                                <!-- --------- tabla R14 ----------- -->
                                                                                <%- include('../partials/dataProjectCard_tablaR14', { k, m, j }); %>
                                                                            </div>
                                                                            <div class="carousel-item" data-bs-interval="600000">

                                                                                <!-- --------- tabla Proceso3D ----------- -->
                                                                                <%- include('../partials/dataProjectCard_tablaProceso3d', { k, m, j }); %>
                                                                            </div>
                                                                            <div class="carousel-item" data-bs-interval="600000">

                                                                                <!-- --------- tabla Diseno ----------- -->
                                                                                <%- include('../partials/dataProjectCard_tablaDiseno', { k, m, j }); %>
                                                                            </div>
                                                                            <div class="carousel-item" data-bs-interval="600000">

                                                                                <!-- --------- tabla Info al 80% ----------- -->
                                                                                <%- include('../partials/dataProjectCard_tablaInfo80', { k, m, j }); %>
                                                                            </div>
                                                                            <div class="carousel-item" data-bs-interval="600000">

                                                                                <!-- --------- tabla S0 ----------- -->
                                                                                <%- include('../partials/dataProjectCard_tablaS0', { k, m, j }); %>
                                                                            </div>
                                                                            <div class="carousel-item" data-bs-interval="600000">

                                                                                <!-- --------- tabla S1 ----------- -->
                                                                                <%- include('../partials/dataProjectCard_tablaS1', { k, m, j }); %>
                                                                            </div>
                                                                            <div class="carousel-item" data-bs-interval="600000">

                                                                               <!-- --------- tabla S2-S3 ----------- -->
                                                                               <%- include('../partials/dataProjectCard_tablaS2_3', { k, m, j }); %>
                                                                            </div>                                                
                                                                        </div>
                                                                    
                                                                    <% } else { %>
                                                                        <div class="carousel-inner">
                                                                            <div class="carousel-item active" data-bs-interval="600000">

                                                                                <!-- --------- tabla R14 ----------- -->
                                                                                <%- include('../partials/dataProjectCard_tablaR14', { k, m, j }); %>
                                                                            </div>
                                                                            <div class="carousel-item" data-bs-interval="600000">

                                                                                <!-- --------- tablaProceso3D ----------- -->
                                                                                <%- include('../partials/dataProjectCard_tablaProceso3d', { k, m, j }); %>
                                                                            </div>
                                                                            <div class="carousel-item" data-bs-interval="600000">

                                                                               <!-- --------- tabla Diseno ----------- -->
                                                                               <%- include('../partials/dataProjectCard_tablaDiseno', { k, m, j }); %>
                                                                            </div>
                                                                            <div class="carousel-item" data-bs-interval="600000">

                                                                                <!-- --------- tabla Info al 80% ----------- -->
                                                                                <%- include('../partials/dataProjectCard_tablaInfo80', { k, m, j }); %>
                                                                            </div>
                                                                            <div class="carousel-item" data-bs-interval="600000">

                                                                                <!-- --------- tabla Info al 100% ----------- -->
                                                                                <%- include('../partials/dataProjectCard_tablaInfo100', { k, m, j }); %>
                                                                            </div>
                                                                            <div class="carousel-item" data-bs-interval="600000">

                                                                                <!-- --------- tabla S0 ----------- -->
                                                                                <%- include('../partials/dataProjectCard_tablaS0', { k, m, j }); %>
                                                                            </div>
                                                                            <div class="carousel-item" data-bs-interval="600000">

                                                                                <!-- --------- tabla S1 ----------- -->
                                                                                <%- include('../partials/dataProjectCard_tablaS1', { k, m, j }); %>
                                                                            </div>
                                                                            <div class="carousel-item" data-bs-interval="600000">

                                                                                <!-- --------- tabla S2-S3 ----------- -->
                                                                                <%- include('../partials/dataProjectCard_tablaS2_3', { k, m, j }); %>
                                                                            </div>
                                                                            <div class="carousel-item" data-bs-interval="600000">

                                                                                <!-- --------- tabla S4 ----------- -->
                                                                                <%- include('../partials/dataProjectCard_tablaS4', { k, m, j }); %>
                                                                            </div>
                                                                            <div class="carousel-item" data-bs-interval="600000">

                                                                                <!-- --------- tabla S5 ----------- -->
                                                                                <%- include('../partials/dataProjectCard_tablaS5', { k, m, j }); %>
                                                                            </div>                                                    
                                                                        </div>
                                                                    <% } %>
                                                                        <!-- --------- botonera carrusel < > ----------- -->
                                                                        <%- include('../partials/dataProjectCard_btnCarrousel', { k, m, j }); %>                                                                    
                                                                </div>
                                                            </div>
                                                            <hr>
                                                            
                                                            <!-- contenedor datos creador por y modificado por -->
                                                            <%- include('../partials/dataProjectCard_containerDatos', { k, m, j }); %>
                                                            
                                                        <% } else { %>
                                                                <div class="container my-3">
                                                                    <span class="badge rounded-pill bg-danger text-white">
                                                                        No hay datos de OT cargados para mostrar </span>
                                                                </div>
                                                                Puedes comenzar a cargar datos de OT en esta OCI# <strong><%= proyecto[m].project[j].oci[k].ociNumber %></strong>,<br>
                                                                haciendo click en el siguiente botón
                                                                <button class="btn btn-danger m-1 rounded-circle"
                                                                    id="btnAddOtFormSelected<%=k%>"
                                                                    aria-controls="collapseExample"
                                                                    data-bs-toggle="collapse"
                                                                    data-bs-target="#collapseExample" aria-expanded="false"
                                                                    style="--bs-btn-font-size: .95rem; color: var(--bs-white);"
                                                                    type="button"
                                                                    name="<%= proyecto[m].project[j].oci[k].ociNumber %>"
                                                                    title="Agregar OT">
                                                                    <i class="fa-solid fa-plus-circle" aria-hidden="true"></i>
                                                                </button>
                                                        <% } %>

                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    <% } %>
                                <% } %>
                            </div>
                        <% } %>

                    <% } else { %>
                        <div class="container my-3">
                            <span class="badge rounded-pill bg-danger text-white">No hay datos cargados para mostrar</span>
                        </div>
                        Puedes agregar proyectos en el cliente <strong><%= cliente.name %>,<br>haciendo click en el siguiente botón
                            <button class="btn btn-success m-1 rounded-circle"
                                id="btnAddOtFormSelected<%=k%>"
                                aria-controls="collapseExample"
                                data-bs-toggle="collapse"
                                data-bs-target="#collapseExample" aria-expanded="false"
                                style="--bs-btn-font-size: .95rem; color: var(--bs-white);"
                                type="button"
                                name="<%= proyecto[m].project[j].oci[k].ociNumber %>"
                                title="Agregar Proyectos a cliente <%= cliente.name %>">
                                <i class="fa-solid fa-plus-circle" aria-hidden="true"></i>
                            </button>
                    <% } %>
            </div>
        </div>
    </div>

    <div class="d-flex justify-content-center mt-2 mb-1 border-top">
        <a class="btn btn-primary me-3 mt-3 mb-1" href="/api/proyectos"><i class="fa-solid fa-reply"></i> Volver Atrás </a>
        <a class="btn btn-secondary ms-3 mt-3 mb-1" href="/api/auth/index"><i class="fa-solid fa-home"></i> Volver al Home </a>
    </div>
</div>